# 🎮 黑白棋AI对弈系统

一个基于AlphaZero模型的黑白棋AI模型和应用，包含Web前端人机对战界面和Auto.js游戏自动化脚本。

## ✨ 项目特色

- **🤖 智能AI对手**：基于AlphaZero算法的深度学习模型，支持C++扩展加速
- **🌐 现代化Web界面**：响应式设计，支持实时对战和悔棋功能
- **🎮 游戏自动化**：Auto.js脚本自动在《一梦江湖》游戏中下棋
- **⚡ 高性能推理**：支持本地和服务器部署，C++ MCTS加速

## 📁 项目结构

```
黑白棋paly_web/
├── app.py                 # Flask服务器主文件
├── AI下棋.js              # Auto.js自动化脚本
├── reversi_model.pth      # 预训练AI模型
├── templates/
│   └── index.html         # Web前端界面
├── 己方回合.png           # 游戏界面识别模板
├── 棋盘.png               # 棋盘识别模板
├── 关闭.png               # 关闭按钮识别模板
└── README.md             # 项目说明
```

## 🚀 快速开始

### 方式一：Web人机对战

1. **安装依赖**
   ```bash
   pip install torch flask numpy pybind11
   ```

2. **启动服务器**
   ```bash
   python app.py
   ```

3. **访问游戏**
   打开浏览器访问 `http://localhost:8082`

### 方式二：游戏自动化（一梦江湖）

1. **部署AI服务**
   - 本地部署：按照方式一启动服务器，并打开安卓模拟器（分辨率1600x900）启动手机版一梦江湖
   - 服务器部署：将 `app.py` 部署到服务器并修改 `AI下棋.js` 中 apiUrl 的 API地址

2. **配置Auto.js**
   - 安装Auto.js v6应用，并在横屏模式下打开应用和设置里的无障碍服务
   - 将项目文件复制到手机存储
   - 在Auto.js中运行 `AI下棋.js`

3. **开始自动下棋**
   - 进入游戏界面后，脚本会自动识别按钮并进行黑白棋对弈
   视频效果展示：https://www.bilibili.com/video/BV1nWy3BkEMJ/

## 🔧 技术架构

### AI模型
- **算法**：AlphaZero + MCTS（蒙特卡洛树搜索）
- **网络结构**：ResNet残差网络
- **推理加速**：支持C++扩展，自动编译优化

### 后端服务
- **框架**：Flask Web框架
- **API接口**：RESTful API设计
- **并发处理**：多线程模型加载

### 前端界面
- **技术栈**：HTML5 + CSS3 + JavaScript
- **功能特性**：
  - 实时棋子计数
  - 合法移动高亮提示
  - 悔棋功能
  - 响应式布局

### 自动化脚本
- **平台**：Auto.js v6
- **功能**：
  - 屏幕截图识别
  - 图像匹配算法
  - 自动点击操作
  - API调用集成

## 📊 API接口

### AI移动接口
```http
POST /api/ai_move
Content-Type: application/json

{
  "board": [[0,0,1,-1,...], ...],  # 8x8棋盘状态
  "player": 1                       # 1:黑棋, -1:白棋
}
```

**响应示例**：
```json
{
  "success": true,
  "ai_move": {"row": 3, "col": 4}
}
```

## 🎯 游戏规则

黑白棋（Reversi/Othello）规则：
- 黑棋先行，双方轮流落子
- 落子必须夹住对方棋子（横、竖、斜方向）
- 被夹住的棋子会翻转成己方颜色
- 无法落子时跳过回合
- 双方都无法落子时游戏结束，棋子多者获胜

## ⚙️ 配置说明

### 服务器配置
- **端口**：默认8082，可在 `app.py` 中修改
- **模型路径**：`reversi_model.pth`
- **分辨率**：支持任意分辨率，Web界面自适应

### Auto.js配置
- **分辨率**：默认1600x900（安卓模拟器）
- **坐标校准**：修改 `AI下棋.js` 中的坐标参数
- **API地址**：修改脚本中的服务器地址

## 🔄 模型更新

系统支持热更新模型文件：
1. 替换 `reversi_model.pth` 文件
2. 服务器会自动检测并重新加载模型
3. 无需重启服务

## 🐛 故障排除

### 常见问题
1. **模型加载失败**
   - 检查 `reversi_model.pth` 文件是否存在
   - 确保PyTorch版本兼容

2. **Auto.js脚本无法运行**
   - 检查截图权限是否开启
   - 验证游戏界面分辨率设置
   - 确认API地址可访问

3. **C++扩展编译失败**
   - 系统会自动回退到Python模式
   - 安装gcc编译环境可解决

## 📄 许可证

AI 模型由本人从零开始训练，项目仅供学习和研究使用。

## 🤝 贡献

欢迎提交Issue和Pull Request来改进项目，或群咨询 770973276。